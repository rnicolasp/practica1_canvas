<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ePaint</title>
    <link rel="stylesheet" th:href="@{/css/home.css}">
</head>
<body>
<div class="page-wrapper">
    <div class="card">
        <h2 class="center">ePaint</h2>
        <div>
            <p class="small-muted">Bienvenido, <strong th:text="${user}">Usuario</strong></p>
            <div class="actions center">
                <a th:href="@{/profile}"><button>Mi Perfil</button></a>
                <a th:href="@{/editor}"><button>Crear nuevo lienzo</button></a>
                <a th:href="@{/logout}"><button>Cerrar sesión</button></a>
            </div>
        </div>

        <hr>

        <div th:if="${!sharedCanvas.isEmpty()}">
            <h3 class="center">Compartidos conmigo</h3>
            <div class="canvas-grid">
                <div class="canvas-card" th:each="c : ${sharedCanvas}" style="border-left: 4px solid #007bff;">
                    <h4 th:text="${c.name}">Nombre</h4>
                    <div class="canvas-info">
                        <p><strong>De:</strong> <span th:text="${c.owner}"></span></p>
                        <p><small>Modificado: <span th:text="${#dates.format(c.dateModified, 'dd/MM/yyyy HH:mm')}"></span></small></p>
                    </div>
                    <div class="canvas-actions">
                        <a th:href="@{/canvas(id=${c.id})}"><button>Ver</button></a>

                        <a th:if="${#lists.contains(editableIds, c.id)}"
                           th:href="@{/editor(id=${c.id})}">
                            <button style="background-color:#007bff; color:white;">Editar</button>
                        </a>
                    </div>
                </div>
            </div>
            <hr>
        </div>

        <h3 class="center">Galería Pública</h3>
        <div class="canvas-grid">
            <div class="canvas-card" th:each="canvas : ${allCanvas}">
                <h4 th:text="${canvas.name}">Nombre</h4>
                <div class="canvas-info">
                    <p><strong>Por:</strong> <span th:text="${canvas.owner}">Propietario</span></p>
                </div>
                <div class="canvas-actions">
                    <a th:href="@{/canvas(id=${canvas.id})}"><button>Ver</button></a>

                    <a th:if="${canvas.owner == user or #lists.contains(editableIds, canvas.id)}"
                       th:href="@{/editor(id=${canvas.id})}">
                        <button style="background-color:#007bff; color:white;">Editar</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>